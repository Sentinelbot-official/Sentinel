<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adaptive Protection - Nexus Bot</title>
    <meta
      name="description"
      content="Real-time server-size-aware protection metrics for Nexus bot"
    />
    <link
      rel="icon"
      type="image/webp"
      href="https://cdn.discordapp.com/app-icons/1444739230679957646/32f2d77d44c2f3989fecd858be53f396.png?size=256"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="pages.css" />
    <style>
      .protection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .protection-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 25px;
        border-radius: 15px;
        color: white;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .protection-card h3 {
        font-size: 2em;
        margin: 10px 0;
      }

      .protection-card p {
        opacity: 0.9;
        margin: 5px 0;
      }

      .tier-breakdown {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
      }

      .tier-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        margin: 15px 0;
        border-radius: 10px;
        border-left: 5px solid;
      }

      .tier-small {
        border-left-color: #10b981;
      }
      .tier-medium {
        border-left-color: #3b82f6;
      }
      .tier-large {
        border-left-color: #f59e0b;
      }
      .tier-huge {
        border-left-color: #ef4444;
      }

      .tier-item h4 {
        margin: 0 0 10px 0;
        font-size: 1.3em;
      }

      .threshold-display {
        display: flex;
        justify-content: space-around;
        margin-top: 15px;
      }

      .threshold-box {
        background: rgba(0, 0, 0, 0.3);
        padding: 10px 20px;
        border-radius: 8px;
      }

      .loading {
        text-align: center;
        padding: 50px;
        font-size: 1.2em;
      }

      .error {
        background: rgba(239, 68, 68, 0.2);
        border: 2px solid #ef4444;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="container">
        <a href="index.html" class="nav-brand">NEXUS</a>

        <div class="nav-right">
          <!-- Dropdown Menu -->
          <div class="dropdown">
            <button class="dropdown-toggle">Menu ‚ñº</button>
            <div class="dropdown-menu">
              <div class="dropdown-category">
                <div class="dropdown-category-header">üöÄ Getting Started</div>
                <a href="setup.html">Setup</a>
                <a href="tutorial.html">Tutorial</a>
              </div>

              <div class="dropdown-category">
                <div class="dropdown-category-header">‚ú® Features</div>
                <a href="features.html">Features</a>
                <a href="commands.html">Commands</a>
                <a href="adaptive-protection.html">Adaptive Protection</a>
              </div>

              <div class="dropdown-category">
                <div class="dropdown-category-header">‚öîÔ∏è Compare</div>
                <a href="comparison.html">vs Wick</a>
                <a href="live-comparison.html">Live Comparison</a>
              </div>

              <div class="dropdown-category">
                <div class="dropdown-category-header">üìä Metrics</div>
                <a href="stats.html">Stats</a>
                <a href="growth.html">Growth</a>
                <a href="status.html">Status</a>
              </div>

              <div class="dropdown-category">
                <div class="dropdown-category-header">üìö Documentation</div>
                <a href="docs.html">Docs</a>
                <a href="api.html">API</a>
                <a href="faq.html">FAQ</a>
              </div>

              <div class="dropdown-category">
                <div class="dropdown-category-header">üë• Community</div>
                <a href="showcase.html">Showcase</a>
                <a href="testimonials.html">Testimonials</a>
                <a href="vote-features.html">Vote Features</a>
                <a href="changelog.html">Changelog</a>
              </div>
            </div>
          </div>

          <a
            href="https://regular-puma-clearly.ngrok-free.app"
            target="_blank"
            class="btn-dashboard"
            >Dashboard</a
          >
          <a href="setup-wizard.html" class="btn-nav">Get Started</a>
        </div>
      </div>
    </nav>

    <div class="container" style="margin-top: 100px">
      <header class="page-header">
        <h1>üéØ Adaptive Protection</h1>
        <p>Real-time server-size-aware protection metrics</p>
      </header>

      <div class="content-section">
        <div class="info-box">
          <h3>üöÄ What is Server-Size-Aware Protection?</h3>
          <p>
            Nexus v3.3.0+ automatically adjusts anti-raid and anti-nuke
            thresholds based on your server size. This prevents false positives
            in large servers while maintaining strict security in small servers.
          </p>
        </div>

        <div id="loading" class="loading">
          <p>Loading adaptive protection metrics...</p>
        </div>

        <div id="error" class="error" style="display: none">
          <h3>‚ùå Error Loading Data</h3>
          <p id="error-message"></p>
        </div>

        <div id="metrics" style="display: none">
          <h2>üìä Current Metrics</h2>

          <div class="protection-grid">
            <div class="protection-card">
              <p>Total Servers</p>
              <h3 id="total-servers">-</h3>
            </div>
            <div class="protection-card">
              <p>Large Servers (500+)</p>
              <h3 id="large-servers">-</h3>
            </div>
            <div class="protection-card">
              <p>Avg Members</p>
              <h3 id="avg-members">-</h3>
            </div>
            <div class="protection-card">
              <p>Protection Status</p>
              <h3 id="protection-status">-</h3>
            </div>
          </div>

          <div class="tier-breakdown">
            <h2>üéØ Server Size Tiers</h2>

            <div class="tier-item tier-small">
              <h4>üü¢ STRICT (Small Servers)</h4>
              <p>
                <strong>Members:</strong> &lt;100 | <strong>Count:</strong>
                <span id="tier-small-count">-</span>
              </p>
              <div class="threshold-display">
                <div class="threshold-box">
                  <strong>Anti-Raid:</strong> 5 joins/10s
                </div>
                <div class="threshold-box">
                  <strong>Anti-Nuke:</strong> 1.0x base
                </div>
              </div>
            </div>

            <div class="tier-item tier-medium">
              <h4>üîµ BALANCED (Medium Servers)</h4>
              <p>
                <strong>Members:</strong> 100-500 | <strong>Count:</strong>
                <span id="tier-medium-count">-</span>
              </p>
              <div class="threshold-display">
                <div class="threshold-box">
                  <strong>Anti-Raid:</strong> 8 joins/10s
                </div>
                <div class="threshold-box">
                  <strong>Anti-Nuke:</strong> 1.0x base
                </div>
              </div>
            </div>

            <div class="tier-item tier-large">
              <h4>üü† RELAXED (Large Servers)</h4>
              <p>
                <strong>Members:</strong> 500-2K | <strong>Count:</strong>
                <span id="tier-large-count">-</span>
              </p>
              <div class="threshold-display">
                <div class="threshold-box">
                  <strong>Anti-Raid:</strong> 15 joins/10s
                </div>
                <div class="threshold-box">
                  <strong>Anti-Nuke:</strong> 1.0x-1.2x
                </div>
              </div>
            </div>

            <div class="tier-item tier-huge">
              <h4>üî¥ VERY RELAXED (Huge Servers)</h4>
              <p>
                <strong>Members:</strong> 2K+ | <strong>Count:</strong>
                <span id="tier-huge-count">-</span>
              </p>
              <div class="threshold-display">
                <div class="threshold-box">
                  <strong>Anti-Raid:</strong> 25 joins/10s
                </div>
                <div class="threshold-box">
                  <strong>Anti-Nuke:</strong> 1.5x-2.0x
                </div>
              </div>
            </div>
          </div>

          <div class="feature-detailed">
            <h3>üí° How It Works</h3>
            <ul>
              <li>
                <strong>Automatic Detection:</strong> Nexus checks your
                server's member count in real-time
              </li>
              <li>
                <strong>Dynamic Scaling:</strong> Thresholds adjust instantly as
                your server grows
              </li>
              <li>
                <strong>No Configuration Needed:</strong> Works automatically
                with your existing sensitivity settings
              </li>
              <li>
                <strong>Zero False Positives:</strong> Large servers no longer
                get false raid alerts during viral spikes
              </li>
              <li>
                <strong>Maintained Security:</strong> Small servers still get
                strict, instant protection
              </li>
            </ul>
          </div>

          <div class="success-box">
            <h3>‚úÖ Benefits</h3>
            <ul>
              <li>
                <strong>For Large Servers:</strong> Handle partnerships,
                announcements, and viral mentions without false raid alerts
              </li>
              <li>
                <strong>For Growing Servers:</strong> Protection automatically
                scales as you grow - no reconfiguration needed
              </li>
              <li>
                <strong>For Small Servers:</strong> Maintain strict security
                with instant threat detection
              </li>
              <li>
                <strong>For Everyone:</strong> Better protection with fewer
                interruptions
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <footer style="text-align: center; padding: 50px 20px; opacity: 0.7">
      <p>&copy; 2025 Nexus Bot. All rights reserved.</p>
    </footer>

    <script>
      // Fetch adaptive protection metrics
      async function loadMetrics() {
        try {
          const response = await fetch(
            "https://regular-puma-clearly.ngrok-free.app/api/v1/adaptive-protection",
            {
              headers: {
                "ngrok-skip-browser-warning": "true",
              },
            }
          );

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const data = await response.json();

          // Update metrics
          document.getElementById("total-servers").textContent =
            data.totalServers.toLocaleString();
          document.getElementById("large-servers").textContent =
            data.largeServerCount.toLocaleString();
          document.getElementById("avg-members").textContent =
            data.averageMemberCount.toLocaleString();
          document.getElementById("protection-status").textContent =
            data.adaptiveProtectionActive ? "‚úÖ Active" : "‚ùå Inactive";

          // Update tier counts
          document.getElementById("tier-small-count").textContent =
            data.sizeDistribution.small.toLocaleString();
          document.getElementById("tier-medium-count").textContent =
            data.sizeDistribution.medium.toLocaleString();
          document.getElementById("tier-large-count").textContent =
            data.sizeDistribution.large.toLocaleString();
          document.getElementById("tier-huge-count").textContent =
            data.sizeDistribution.huge.toLocaleString();

          // Show metrics, hide loading
          document.getElementById("loading").style.display = "none";
          document.getElementById("metrics").style.display = "block";
        } catch (error) {
          console.error("Error loading metrics:", error);
          document.getElementById("loading").style.display = "none";
          document.getElementById("error").style.display = "block";
          document.getElementById("error-message").textContent = error.message;
        }
      }

      // Load metrics on page load
      loadMetrics();

      // Refresh every 30 seconds
      setInterval(loadMetrics, 30000);
    </script>
  </body>
</html>
